<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.6" xml:lang="en-US">
  <compounddef id="_geometry_8cc" kind="file" language="C++">
    <compoundname>Geometry.cc</compoundname>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_geometry_8hh" kindref="compound">Geometry.hh</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="_box_8hh" kindref="compound">Box.hh</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;iostream&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"><ref refid="class_geometry_1a4c301c163c63d21ed08c17b0f4e131d3" kindref="member">Geometry::Geometry</ref>()<sp/>{</highlight></codeline>
<codeline lineno="9"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>default<sp/>values:<sp/>50<sp/>layers<sp/>of<sp/>2.3<sp/>[mm]<sp/>absorber<sp/>(PbWO4)<sp/>and<sp/>5.7<sp/>[mm]<sp/>gap<sp/>(lAr)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a5780a2301d1cc122f19d49743a96a411" kindref="member">fNumLayers</ref><sp/><sp/>=<sp/><sp/>50;</highlight></codeline>
<codeline lineno="11"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a7939a17bb7abf32957f902e4143349ff" kindref="member">fAbsThick</ref><sp/><sp/><sp/>=<sp/>2.3;<sp/></highlight><highlight class="comment">//<sp/>defult<sp/>value<sp/>[mm]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1afcaed22992d54b01abfba01dd09fa2d9" kindref="member">fGapThick</ref><sp/><sp/><sp/>=<sp/>5.7;<sp/></highlight><highlight class="comment">//<sp/>defult<sp/>value<sp/>[mm]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a3a114ec53aed78cd5e04d08b4daa3127" kindref="member">fCaloSizeYZ</ref><sp/>=<sp/>400;<sp/></highlight><highlight class="comment">//<sp/>defult<sp/>value<sp/>[mm]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>these<sp/>will<sp/>be<sp/>computed<sp/>automatically<sp/>in<sp/>the<sp/>`UpdateParameters`</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1aea951dfb90df1521866737945ed706cf" kindref="member">fCaloStartX</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a801f4fb769893443a3801e6b87da8fa6" kindref="member">fPrimaryXPosition</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>crate<sp/>shapes<sp/>here<sp/>for<sp/>all<sp/>objects:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>their<sp/>proper<sp/>size<sp/>is<sp/>set<sp/>when<sp/>calling<sp/>`UpdateParameters`<sp/>below</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>material<sp/>index<sp/>is<sp/>set<sp/>to<sp/>0,<sp/>1<sp/>or<sp/>2<sp/>that<sp/>corresponds<sp/>to<sp/>(using<sp/>the<sp/>default</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/>material<sp/>list)<sp/>{0<sp/>-<sp/>G4_Galactic;<sp/>1<sp/>-<sp/>G4_PbWO4,<sp/>2<sp/>-<sp/>G4_lAr}</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a79a7642cf113cceb8ebff39f17a559c1" kindref="member">fBoxWorld</ref><sp/><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_box" kindref="compound">Box</ref>(</highlight><highlight class="stringliteral">&quot;World&quot;</highlight><highlight class="normal">,<sp/>0,<sp/>1,1,1);<sp/></highlight><highlight class="comment">//<sp/>material<sp/>index<sp/>=<sp/>0<sp/>G4_Galactic</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_box" kindref="compound">Box</ref>(</highlight><highlight class="stringliteral">&quot;Calo&quot;</highlight><highlight class="normal"><sp/>,<sp/>0,<sp/>1,1,1);<sp/></highlight><highlight class="comment">//<sp/>material<sp/>index<sp/>=<sp/>0<sp/>G4_Galactic</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1af7ef69ba1fde966b851634fc3ab132bc" kindref="member">fBoxLayer</ref><sp/><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_box" kindref="compound">Box</ref>(</highlight><highlight class="stringliteral">&quot;Layer&quot;</highlight><highlight class="normal">,<sp/>0,<sp/>1,1,1);<sp/></highlight><highlight class="comment">//<sp/>material<sp/>index<sp/>=<sp/>0<sp/>G4_Galactic</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_box" kindref="compound">Box</ref>(</highlight><highlight class="stringliteral">&quot;Abs&quot;</highlight><highlight class="normal"><sp/><sp/>,<sp/>1,<sp/>1,1,1);<sp/></highlight><highlight class="comment">//<sp/>material<sp/>index<sp/>=<sp/>1<sp/>G4_PbWO4</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_box" kindref="compound">Box</ref>(</highlight><highlight class="stringliteral">&quot;Gap&quot;</highlight><highlight class="normal"><sp/><sp/>,<sp/>2,<sp/>1,1,1);<sp/></highlight><highlight class="comment">//<sp/>material<sp/>index<sp/>=<sp/>2<sp/>G4_lAr</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a3b86bcc854f3a33e73fa52b5ac880a15" kindref="member">UpdateParameters</ref>();</highlight></codeline>
<codeline lineno="30"><highlight class="normal">}</highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><ref refid="class_geometry_1ad55e832122ab3a2833dcaa6507867678" kindref="member">Geometry::~Geometry</ref>()<sp/>{</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1a79a7642cf113cceb8ebff39f17a559c1" kindref="member">fBoxWorld</ref>;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref>;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1af7ef69ba1fde966b851634fc3ab132bc" kindref="member">fBoxLayer</ref>;</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref>;</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref>;</highlight></codeline>
<codeline lineno="39"><highlight class="normal">}</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"></highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1a3b86bcc854f3a33e73fa52b5ac880a15" kindref="member">Geometry::UpdateParameters</ref>()<sp/>{</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>the<sp/>layer<sp/>and<sp/>calorimeter<sp/>thicknesses<sp/>based<sp/>on<sp/>the<sp/>`absorber`,</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>`gap`<sp/>thinkesses<sp/>and<sp/>the<sp/>number<sp/>of<sp/>layers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref><sp/>=<sp/><ref refid="class_geometry_1a7939a17bb7abf32957f902e4143349ff" kindref="member">fAbsThick</ref><sp/>+<sp/><ref refid="class_geometry_1afcaed22992d54b01abfba01dd09fa2d9" kindref="member">fGapThick</ref>;</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref><sp/><sp/>=<sp/><ref refid="class_geometry_1a5780a2301d1cc122f19d49743a96a411" kindref="member">fNumLayers</ref>*<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref>;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>set/calculate<sp/>the<sp/>left<sp/>hand<sp/>side<sp/>x<sp/>point<sp/>where<sp/>the<sp/>calorimeter<sp/>starts</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1aea951dfb90df1521866737945ed706cf" kindref="member">fCaloStartX</ref><sp/>=<sp/>-0.5*<ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref>;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>set/calculate<sp/>a<sp/>world<sp/>size<sp/>such<sp/>that<sp/>everything<sp/>fits<sp/>inside</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>worldThick<sp/>=<sp/>1.1*<ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref>;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>set/calculate<sp/>the<sp/>mid-point<sp/>between<sp/>the<sp/>world<sp/>and<sp/>calorimeter<sp/>on<sp/>the<sp/>left</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a801f4fb769893443a3801e6b87da8fa6" kindref="member">fPrimaryXPosition</ref><sp/>=<sp/>-0.25*(worldThick<sp/>+<sp/><ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref>);</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>half<sp/>size<sp/>of<sp/>all<sp/>(but<sp/>the<sp/>world)<sp/>along<sp/>the<sp/>YZ<sp/>plane</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>halfCaloYZ<sp/>=<sp/>0.5*<ref refid="class_geometry_1a3a114ec53aed78cd5e04d08b4daa3127" kindref="member">fCaloSizeYZ</ref>;</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a79a7642cf113cceb8ebff39f17a559c1" kindref="member">fBoxWorld</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(0.5*worldThick,<sp/>0);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a79a7642cf113cceb8ebff39f17a559c1" kindref="member">fBoxWorld</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(1.1*halfCaloYZ,<sp/>1);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a79a7642cf113cceb8ebff39f17a559c1" kindref="member">fBoxWorld</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(1.1*halfCaloYZ,<sp/>2);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iMatCalo<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref>-&gt;<ref refid="class_box_1ab2e8383851eeaa396268241399073081" kindref="member">SetMaterialIndx</ref>(iMatCalo);</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(0.5*<ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>1);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>2);</highlight></codeline>
<codeline lineno="67"><highlight class="normal"></highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1af7ef69ba1fde966b851634fc3ab132bc" kindref="member">fBoxLayer</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(0.5*<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1af7ef69ba1fde966b851634fc3ab132bc" kindref="member">fBoxLayer</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>1);</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1af7ef69ba1fde966b851634fc3ab132bc" kindref="member">fBoxLayer</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>2);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"></highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(0.5*<ref refid="class_geometry_1a7939a17bb7abf32957f902e4143349ff" kindref="member">fAbsThick</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>1);</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>2);</highlight></codeline>
<codeline lineno="76"><highlight class="normal"></highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(0.5*<ref refid="class_geometry_1afcaed22992d54b01abfba01dd09fa2d9" kindref="member">fGapThick</ref>,<sp/>0);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>1);</highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref>-&gt;<ref refid="class_box_1ab6cccf2b74be881f887f118eb1cdffaf" kindref="member">SetHalfLength</ref>(halfCaloYZ,<sp/>2);</highlight></codeline>
<codeline lineno="80"><highlight class="normal">}</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="comment">//<sp/>note:<sp/>try<sp/>to<sp/>keep<sp/>this<sp/>more<sp/>verbose<sp/>than<sp/>fast<sp/>to<sp/>keep<sp/>it<sp/>clear</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1af34c4d9e94d5026ed64104c3accbb354" kindref="member">Geometry::CalculateDistanceToOut</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal">*<sp/>r,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>*v,<sp/><ref refid="class_box" kindref="compound">Box</ref>**<sp/>currentVolume,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>indxLayer,<sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal">*<sp/>indxAbs)<sp/>{</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>init<sp/>everything<sp/>to<sp/>a<sp/>step<sp/>in<sp/>the<sp/>`world`<sp/>case</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/>*currentVolume<sp/>=<sp/><ref refid="class_geometry_1a79a7642cf113cceb8ebff39f17a559c1" kindref="member">fBoxWorld</ref>;</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/>*indxLayer<sp/><sp/><sp/><sp/><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/>*indxAbs<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>-1;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>position<sp/>in<sp/>the<sp/>`calorimeter`<sp/>system:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>only<sp/>x-coordinate<sp/>is<sp/>need<sp/>as<sp/>everything<sp/>is<sp/>centered<sp/>along<sp/>the<sp/>yz</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>actually<sp/>its<sp/>the<sp/>same<sp/>as<sp/>the<sp/>global:<sp/>the<sp/>calorimeter<sp/>is<sp/>not<sp/>translated<sp/>nor<sp/>rotated</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>rx_Calo<sp/>=<sp/>r[0];</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>dToCalo<sp/>=<sp/><ref refid="class_geometry_1ae1927e8a7db773595b8bd9038ab06c72" kindref="member">fBoxCalo</ref>-&gt;<ref refid="class_box_1aad17ace7ec8e5b684b09833a3d35a2bc" kindref="member">DistanceToOut</ref>(r,<sp/>v);</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>check<sp/>if<sp/>about<sp/>leaving<sp/>the<sp/>calorimeter<sp/>volume:<sp/>distance<sp/>to<sp/>out<sp/>is<sp/>zero</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dToCalo<sp/>==<sp/>0.0)<sp/>{</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>currentVolume<sp/>is<sp/>already<sp/>set<sp/>to<sp/>`world`</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>1.0E+20;</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>the<sp/>position<sp/>in<sp/>the<sp/>`layer`<sp/>system:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>first<sp/>calculate<sp/>the<sp/>index<sp/>of<sp/>the<sp/>`layer`<sp/>in<sp/>which<sp/>the<sp/>point<sp/>is<sp/>located</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>iLayer<sp/>=<sp/>int(<sp/>(rx_Calo+0.5*<ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref>)/<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref><sp/>);</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/>*indxLayer<sp/>=<sp/>iLayer;</highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>then<sp/>the<sp/>corresponding<sp/>translation<sp/>vector<sp/>and<sp/>transform<sp/>the<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>trLayeri<sp/>=<sp/>-0.5*<ref refid="class_geometry_1af96f94a6b86482ffa34e8a48ddfb416f" kindref="member">fCaloThick</ref><sp/>+<sp/>(iLayer+0.5)*<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref>;</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>rx_Layer<sp/>=<sp/>rx_Calo<sp/>-<sp/>trLayeri;</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/>r[0]<sp/>=<sp/><sp/>rx_Layer;</highlight></codeline>
<codeline lineno="109"><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>the<sp/>distance<sp/>to<sp/>the<sp/>`layer`<sp/>boundary<sp/>along<sp/>the<sp/>given<sp/>direction</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>why:<sp/>tolerance<sp/>and<sp/>direction<sp/>was<sp/>not<sp/>considered!<sp/>So<sp/>to<sp/>detect<sp/>here<sp/>that</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/><sp/><sp/><sp/><sp/><sp/>the<sp/>point<sp/>is<sp/>actually<sp/>miss-located<sp/>(distance<sp/>is<sp/>zero<sp/>in<sp/>that<sp/>case.)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="113"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(<ref refid="class_geometry_1af7ef69ba1fde966b851634fc3ab132bc" kindref="member">fBoxLayer</ref>-&gt;<ref refid="class_box_1aad17ace7ec8e5b684b09833a3d35a2bc" kindref="member">DistanceToOut</ref>(r,<sp/>v)<sp/>==<sp/>0.0)<sp/>{</highlight></codeline>
<codeline lineno="114"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>0.0;</highlight></codeline>
<codeline lineno="115"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>NOTE:<sp/>I<sp/>could<sp/>also<sp/>push<sp/>here<sp/>and<sp/>do<sp/>recursion<sp/>but<sp/>keep<sp/>it<sp/>clear<sp/>and<sp/>push<sp/>only<sp/>in<sp/>the<sp/>steppers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>if<sp/>the<sp/>point<sp/>is<sp/>in<sp/>the<sp/>`absorber`<sp/>or<sp/>the<sp/>`gap`<sp/>part<sp/>of<sp/>the<sp/>`layer`</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(rx_Layer<sp/>+<sp/>0.5*<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref><sp/>&lt;<sp/><ref refid="class_geometry_1a7939a17bb7abf32957f902e4143349ff" kindref="member">fAbsThick</ref><sp/>||<sp/><ref refid="class_geometry_1afcaed22992d54b01abfba01dd09fa2d9" kindref="member">fGapThick</ref><sp/>==<sp/>0)<sp/>{<sp/></highlight><highlight class="comment">//<sp/>in<sp/>the<sp/>`absorber`</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>the<sp/>position<sp/>in<sp/>the<sp/>`absorber`<sp/>system:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>the<sp/>translation<sp/>vector<sp/>and<sp/>transform<sp/>the<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>trAbs<sp/>=<sp/>-0.5*(<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref><sp/>-<sp/><ref refid="class_geometry_1a7939a17bb7abf32957f902e4143349ff" kindref="member">fAbsThick</ref>);</highlight></codeline>
<codeline lineno="123"><highlight class="normal"><sp/><sp/><sp/><sp/>r[0]<sp/>=<sp/>rx_Layer<sp/>-<sp/>trAbs;</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>what<sp/>is<sp/>left<sp/>and<sp/>calculate<sp/>the<sp/>distance<sp/>to<sp/>the<sp/>`absorber`<sp/>boundary<sp/>along</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>given<sp/>direction<sp/>(again,<sp/>I<sp/>could<sp/>push<sp/>here<sp/>and<sp/>do<sp/>recursion<sp/>whenever<sp/>it&apos;s<sp/>zero)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/>*currentVolume<sp/>=<sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref>;</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>*indxAbs<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1aa094c984f2bc46d4edd4f68fa665826c" kindref="member">fBoxAbs</ref>-&gt;<ref refid="class_box_1aad17ace7ec8e5b684b09833a3d35a2bc" kindref="member">DistanceToOut</ref>(r,<sp/>v);</highlight></codeline>
<codeline lineno="129"><highlight class="normal"><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{<sp/></highlight><highlight class="comment">//<sp/>in<sp/>the<sp/>`gap`</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>calculate<sp/>the<sp/>position<sp/>in<sp/>the<sp/>`gap`<sp/>system:</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>-<sp/>the<sp/>translation<sp/>vector<sp/>and<sp/>transform<sp/>the<sp/>point</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><sp/>trGap<sp/>=<sp/>-0.5*(<ref refid="class_geometry_1a442075c15e051aefeba6648f89207688" kindref="member">fLayerThick</ref><sp/>-<ref refid="class_geometry_1afcaed22992d54b01abfba01dd09fa2d9" kindref="member">fGapThick</ref>)<sp/>+<sp/><ref refid="class_geometry_1a7939a17bb7abf32957f902e4143349ff" kindref="member">fAbsThick</ref>;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"><sp/><sp/><sp/><sp/>r[0]<sp/>=<sp/>rx_Layer<sp/>-<sp/>trGap;</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>set<sp/>what<sp/>is<sp/>left<sp/>and<sp/>calculate<sp/>the<sp/>distance<sp/>to<sp/>the<sp/>`gap`<sp/>boundary<sp/>along</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>the<sp/>given<sp/>direction<sp/>(again,<sp/>I<sp/>could<sp/>push<sp/>here<sp/>and<sp/>do<sp/>recursion<sp/>whenever<sp/>it&apos;s<sp/>zero)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/>*currentVolume<sp/>=<sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref>;</highlight></codeline>
<codeline lineno="137"><highlight class="normal"><sp/><sp/><sp/><sp/>*indxAbs<sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/><ref refid="class_geometry_1a62b4059f63d26b91d8503707c7b2d860" kindref="member">fBoxGap</ref>-&gt;<ref refid="class_box_1aad17ace7ec8e5b684b09833a3d35a2bc" kindref="member">DistanceToOut</ref>(r,<sp/>v);</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/>}</highlight></codeline>
<codeline lineno="140"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/Users/mnovak/projects/Geant4/For-DiffProgramming/hepemshow/Simulation/src/Geometry.cc"/>
  </compounddef>
</doxygen>
